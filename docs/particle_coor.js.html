<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>particle/coor.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-01-快速入门.html">01-快速入门</a></li><li><a href="tutorial-02-模板生成器.html">02-模板生成器</a></li></ul><h3>Modules</h3><ul><li><a href="module-algo_Boids.html">algo/Boids</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_Boids.html#~boids_middlewares">boids_middlewares</a></li></ul></li><li><a href="module-algo_LSystem.html">algo/LSystem</a></li><li><a href="module-algo_Mandelbrot_Set.html">algo/Mandelbrot_Set</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_Mandelbrot_Set.html#~Mandelbrot_Set">Mandelbrot_Set</a></li><li data-type='method' style='display: none;'><a href="module-algo_Mandelbrot_Set.html#~Julia_Set">Julia_Set</a></li></ul></li><li><a href="module-algo_NNS.html">algo/NNS</a></li><li><a href="module-algo_OSS.html">algo/OSS</a></li><li><a href="module-context_canvas.html">context/canvas</a></li><li><a href="module-particle_area.html">particle/area</a></li><li><a href="module-particle_border.html">particle/border</a></li><li><a href="module-particle_coor.html">particle/coor</a></li><li><a href="module-particle_field.html">particle/field</a></li><li><a href="module-particle_particle.html">particle/particle</a></li><li><a href="module-particle_particle_system.html">particle/particle_system</a></li><li><a href="module-particle_tracker.html">particle/tracker</a></li><li><a href="module-utils_iterator.html">utils/iterator</a></li><li><a href="module-utils_random.html">utils/random</a></li><li><a href="module-utils_tools.html">utils/tools</a></li><li><a href="module-vector_vector.html">vector/vector</a></li><li><a href="module-views_capturer.html">views/capturer</a></li><li><a href="module-views_color.html">views/color</a></li><li><a href="module-views_randerer.html">views/randerer</a></li><li><a href="module-views_views.html">views/views</a></li></ul><h3>Classes</h3><ul><li><a href="module-algo_Boids-Boid.html">Boid</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_Boids-Boid.html#rules_action">rules_action</a></li><li data-type='method' style='display: none;'><a href="module-algo_Boids-Boid.html#action">action</a></li></ul></li><li><a href="module-algo_LSystem-LSystem.html">LSystem</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_LSystem-LSystem.html#next">next</a></li><li data-type='method' style='display: none;'><a href="module-algo_LSystem-LSystem.html#gen">gen</a></li><li data-type='method' style='display: none;'><a href="module-algo_LSystem-LSystem.html#iter">iter</a></li><li data-type='method' style='display: none;'><a href="module-algo_LSystem-LSystem.html#act">act</a></li><li data-type='method' style='display: none;'><a href="module-algo_LSystem-LSystem.html#actIter">actIter</a></li></ul></li><li><a href="module-algo_Mandelbrot_Set-Complex.html">Complex</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_Mandelbrot_Set-Complex.html#add">add</a></li><li data-type='method' style='display: none;'><a href="module-algo_Mandelbrot_Set-Complex.html#mult">mult</a></li><li data-type='method' style='display: none;'><a href="module-algo_Mandelbrot_Set-Complex.html#norm">norm</a></li></ul></li><li><a href="module-algo_NNS-NearestNeighborSearch.html">NearestNeighborSearch</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_NNS-NearestNeighborSearch.html#build">build</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-NearestNeighborSearch.html#near">near</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-NearestNeighborSearch.html#k_near">k_near</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-NearestNeighborSearch.html#nps">nps</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-NearestNeighborSearch.html#.toGraph">toGraph</a></li></ul></li><li><a href="module-algo_NNS-LinearNNS.html">LinearNNS</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_NNS-LinearNNS.html#near">near</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-LinearNNS.html#k_near">k_near</a></li></ul></li><li><a href="module-algo_NNS-GridNNS.html">GridNNS</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_NNS-GridNNS.html#.GridContainer">GridContainer</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-GridNNS.html#build">build</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-GridNNS.html#near">near</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-GridNNS.html#k_near">k_near</a></li></ul></li><li><a href="module-algo_NNS-GridContainer.html">GridContainer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_NNS-GridContainer.html#toGrid">toGrid</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-GridContainer.html#index">index</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-GridContainer.html#gns">gns</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-GridContainer.html#set">set</a></li><li data-type='method' style='display: none;'><a href="module-algo_NNS-GridContainer.html#get">get</a></li></ul></li><li><a href="module-algo_OSS-Solver.html">Solver</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_OSS-Solver.html#action">action</a></li><li data-type='method' style='display: none;'><a href="module-algo_OSS-Solver.html#isEnd">isEnd</a></li></ul></li><li><a href="module-algo_OSS-OptimumSolutionSolvers.html">OptimumSolutionSolvers</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-algo_OSS-OptimumSolutionSolvers.html#init">init</a></li><li data-type='method' style='display: none;'><a href="module-algo_OSS-OptimumSolutionSolvers.html#next">next</a></li><li data-type='method' style='display: none;'><a href="module-algo_OSS-OptimumSolutionSolvers.html#isEnd">isEnd</a></li></ul></li><li><a href="module-context_canvas-Canvas.html">Canvas</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-context_canvas-Canvas.html#resize">resize</a></li><li data-type='method' style='display: none;'><a href="module-context_canvas-Canvas.html#refresh">refresh</a></li><li data-type='method' style='display: none;'><a href="module-context_canvas-Canvas.html#point">point</a></li><li data-type='method' style='display: none;'><a href="module-context_canvas-Canvas.html#line">line</a></li><li data-type='method' style='display: none;'><a href="module-context_canvas-Canvas.html#lines">lines</a></li><li data-type='method' style='display: none;'><a href="module-context_canvas-Canvas.html#circle">circle</a></li><li data-type='method' style='display: none;'><a href="module-context_canvas-Canvas.html#rect">rect</a></li></ul></li><li><a href="module-particle_area-BaseArea.html">BaseArea</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_area-BaseArea.html#in">in</a></li></ul></li><li><a href="module-particle_area-Area.html">Area</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_area-Area.html#in">in</a></li></ul></li><li><a href="module-particle_area-RectArea.html">RectArea</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_area-RectArea.html#in">in</a></li></ul></li><li><a href="module-particle_area-CircleArea.html">CircleArea</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_area-CircleArea.html#in">in</a></li></ul></li><li><a href="module-particle_border-Border.html">Border</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_border-Border.html#limit">limit</a></li></ul></li><li><a href="module-particle_border-RectReflectBorder.html">RectReflectBorder</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_border-RectReflectBorder.html#limit">limit</a></li></ul></li><li><a href="module-particle_border-RectLoopBorder.html">RectLoopBorder</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_border-RectLoopBorder.html#limit">limit</a></li></ul></li><li><a href="module-particle_border-RingReflectBorder.html">RingReflectBorder</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_border-RingReflectBorder.html#limit">limit</a></li></ul></li><li><a href="module-particle_border-RingLoopBorder.html">RingLoopBorder</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_border-RingLoopBorder.html#limit">limit</a></li></ul></li><li><a href="module-particle_coor-CoordinateSystem.html">CoordinateSystem</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_coor-CoordinateSystem.html#to">to</a></li><li data-type='method' style='display: none;'><a href="module-particle_coor-CoordinateSystem.html#from">from</a></li></ul></li><li><a href="module-particle_coor-RCS.html">RCS</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_coor-RCS.html#to">to</a></li><li data-type='method' style='display: none;'><a href="module-particle_coor-RCS.html#from">from</a></li><li data-type='method' style='display: none;'><a href="module-particle_coor-RCS.html#zoom">zoom</a></li><li data-type='method' style='display: none;'><a href="module-particle_coor-RCS.html#move">move</a></li></ul></li><li><a href="module-particle_coor-Grid.html">Grid</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_coor-Grid.html#to">to</a></li><li data-type='method' style='display: none;'><a href="module-particle_coor-Grid.html#from">from</a></li></ul></li><li><a href="module-particle_coor-PolarCS.html">PolarCS</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_coor-PolarCS.html#to">to</a></li><li data-type='method' style='display: none;'><a href="module-particle_coor-PolarCS.html#from">from</a></li></ul></li><li><a href="module-particle_field-Field.html">Field</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_field-Field.html#force">force</a></li></ul></li><li><a href="module-particle_field-Gravity.html">Gravity</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_field-Gravity.html#force">force</a></li><li data-type='method' style='display: none;'><a href="module-particle_field-Gravity.html#.gravity">gravity</a></li></ul></li><li><a href="module-particle_field-AccelerateField.html">AccelerateField</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_field-AccelerateField.html#force">force</a></li></ul></li><li><a href="module-particle_field-DecelerateField.html">DecelerateField</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_field-DecelerateField.html#force">force</a></li></ul></li><li><a href="module-particle_field-DeflectField.html">DeflectField</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_field-DeflectField.html#force">force</a></li></ul></li><li><a href="module-particle_particle-Particle.html">Particle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_particle-Particle.html#action">action</a></li><li data-type='method' style='display: none;'><a href="module-particle_particle-Particle.html#isEnd">isEnd</a></li></ul></li><li><a href="module-particle_particle-ForceParticle.html">ForceParticle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_particle-ForceParticle.html#force">force</a></li><li data-type='method' style='display: none;'><a href="module-particle_particle-ForceParticle.html#action">action</a></li></ul></li><li><a href="module-particle_particle-LinearMotorParticle.html">LinearMotorParticle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_particle-LinearMotorParticle.html#isEnd">isEnd</a></li><li data-type='method' style='display: none;'><a href="module-particle_particle-LinearMotorParticle.html#action">action</a></li></ul></li><li><a href="module-particle_particle-CircularMotorParticle.html">CircularMotorParticle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_particle-CircularMotorParticle.html#action">action</a></li></ul></li><li><a href="module-particle_particle-RandomWalkerParticle.html">RandomWalkerParticle</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_particle-RandomWalkerParticle.html#_probability">_probability</a></li><li data-type='method' style='display: none;'><a href="module-particle_particle-RandomWalkerParticle.html#rv_select">rv_select</a></li><li data-type='method' style='display: none;'><a href="module-particle_particle-RandomWalkerParticle.html#action">action</a></li></ul></li><li><a href="module-particle_particle_system-ParticleSystem.html">ParticleSystem</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-particle_particle_system-ParticleSystem.html#build">build</a></li><li data-type='method' style='display: none;'><a href="module-particle_particle_system-ParticleSystem.html#particle_action">particle_action</a></li><li data-type='method' style='display: none;'><a href="module-particle_particle_system-ParticleSystem.html#action">action</a></li></ul></li><li><a href="module-particle_tracker-TrailTracker.html">TrailTracker</a></li><li><a href="module-utils_iterator-Iterator.html">Iterator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_iterator-Iterator.html#val">val</a></li><li data-type='method' style='display: none;'><a href="module-utils_iterator-Iterator.html#end">end</a></li><li data-type='method' style='display: none;'><a href="module-utils_iterator-Iterator.html#tolist">tolist</a></li></ul></li><li><a href="module-utils_iterator-Range.html">Range</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_iterator-Range.html#.S">S</a></li><li data-type='method' style='display: none;'><a href="module-utils_iterator-Range.html#.N">N</a></li><li data-type='method' style='display: none;'><a href="module-utils_iterator-Range.html#val">val</a></li><li data-type='method' style='display: none;'><a href="module-utils_iterator-Range.html#end">end</a></li><li data-type='method' style='display: none;'><a href="module-utils_iterator-Range.html#clone">clone</a></li></ul></li><li><a href="module-utils_iterator-FuncIterator.html">FuncIterator</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_iterator-FuncIterator.html#val">val</a></li><li data-type='method' style='display: none;'><a href="module-utils_iterator-FuncIterator.html#end">end</a></li></ul></li><li><a href="module-utils_random-RandomSelector.html">RandomSelector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_random-RandomSelector.html#_probability">_probability</a></li><li data-type='method' style='display: none;'><a href="module-utils_random-RandomSelector.html#select">select</a></li></ul></li><li><a href="module-utils_tools-Tools.html">Tools</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-utils_tools-Tools.html#.regular_polygon">regular_polygon</a></li><li data-type='method' style='display: none;'><a href="module-utils_tools-Tools.html#.ATR">ATR</a></li><li data-type='method' style='display: none;'><a href="module-utils_tools-Tools.html#.RTA">RTA</a></li><li data-type='method' style='display: none;'><a href="module-utils_tools-Tools.html#.random">random</a></li><li data-type='method' style='display: none;'><a href="module-utils_tools-Tools.html#.rselect">rselect</a></li><li data-type='method' style='display: none;'><a href="module-utils_tools-Tools.html#.RGB">RGB</a></li></ul></li><li><a href="module-vector_vector-Vector.html">Vector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#.v">v</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#.ones">ones</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#.zeros">zeros</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#.random">random</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#.rcv">rcv</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#add">add</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#mult">mult</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#sub">sub</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#dot">dot</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#inner">inner</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#.LC">LC</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#LM">LM</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#lerp">lerp</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#rotate">rotate</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#dim">dim</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#norm">norm</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#normalization">normalization</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#limit">limit</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#clone">clone</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#copy">copy</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#dist">dist</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#rad">rad</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#toint">toint</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#in">in</a></li><li data-type='method' style='display: none;'><a href="module-vector_vector-Vector.html#.vpoints">vpoints</a></li></ul></li><li><a href="module-views_capturer-Capturer.html">Capturer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-views_capturer-Capturer.html#capturing">capturing</a></li><li data-type='method' style='display: none;'><a href="module-views_capturer-Capturer.html#capture">capture</a></li></ul></li><li><a href="module-views_color-ColorVector.html">ColorVector</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-views_color-ColorVector.html#color">color</a></li><li data-type='method' style='display: none;'><a href="module-views_color-ColorVector.html#val">val</a></li><li data-type='method' style='display: none;'><a href="module-views_color-ColorVector.html#clone">clone</a></li></ul></li><li><a href="module-views_color-ColorGradient.html">ColorGradient</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-views_color-ColorGradient.html#color">color</a></li><li data-type='method' style='display: none;'><a href="module-views_color-ColorGradient.html#isEnd">isEnd</a></li></ul></li><li><a href="module-views_randerer-Randerer.html">Randerer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-views_randerer-Randerer.html#rander">rander</a></li></ul></li><li><a href="module-views_randerer-IntervalRanderer.html">IntervalRanderer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-views_randerer-IntervalRanderer.html#rander">rander</a></li><li data-type='method' style='display: none;'><a href="module-views_randerer-IntervalRanderer.html#stop">stop</a></li></ul></li><li><a href="module-views_randerer-SingleFrameRanderer.html">SingleFrameRanderer</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-views_randerer-SingleFrameRanderer.html#rander">rander</a></li></ul></li><li><a href="module-views_views-Views.html">Views</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-views_views-Views.html#.nodelink">nodelink</a></li><li data-type='method' style='display: none;'><a href="module-views_views-Views.html#.grid">grid</a></li><li data-type='method' style='display: none;'><a href="module-views_views-Views.html#.lightLine">lightLine</a></li><li data-type='method' style='display: none;'><a href="module-views_views-Views.html#.lightRing">lightRing</a></li><li data-type='method' style='display: none;'><a href="module-views_views-Views.html#.trail">trail</a></li></ul></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">particle/coor.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module
 * @desc     坐标系: 构建坐标系, 对向量进行坐标变换
 * @project  Vision
 * @author   Ais
 * @date     2022-08-01
 * @version  0.1.0
*/


import { Vector } from "../vector/vector.js";


/****************************************  
(PCS)屏幕像素坐标系(Canvas画布坐标)

  o(0, 0) ----------> (+x)
  |
  | 
  |
  V
 (+y)

 * o(0, 0): 坐标原点位于屏幕左上角
 * +x: x轴正方向水平向右
 * +y: y轴正方向垂直向下
 * scale: 标度为正整数(1), 代表一个像素
****************************************/


/** 坐标系(基类) */
class CoordinateSystem {

    /**
     * PCS(主坐标系/屏幕像素坐标系) -> CS(当前坐标系): 从主坐标系转换到当前坐标系
     * 
     * @param { Vector } vector - 主坐标系目标向量
     * @returns { Vector } 转换后的当前坐标系目标向量
     */
    to(vector) {
        return vector;
    }

    /**
     * CS -> PCS: 从当前坐标系转换到主坐标系
     * @param { Vector } vector - 当前坐标系目标向量
     * @returns { Vector } 转换后的主坐标系目标向量
     */
    from(vector) {
        return vector;
    }
}


//实数坐标系
class RCS extends CoordinateSystem {

    /**
     * @classdesc 实数坐标系: 将屏幕像素坐标系映射到实数域中进行计算
     * 
     * @property { Vector } co - 屏幕像素坐标系原点坐标
     * @property { number } scale - 标度比例，一个像素对应的值(scale>0)
     * 
     * @param { Vector } co - 屏幕像素坐标系原点坐标
     * @param { number } [scale=1] - 标度比例
     * 
     * @example
     * let rcs = new RCS(Vector.v(canvas.cx, canvas.cy), 0.5);
     */
    constructor(co, scale=1) {
        super();
        this._co = co;
        this._scale = scale;
    }
    
    get scale() { return this._scale; }
    set scale(val) {
        if(val &lt;= 0) { throw Error(`scale(${val}) must be in (0, Inf)`); }
        this._scale = val;
    }
    get co() { return this._co.clone(); }

    /** @override */
    to(vector) {
        let x = ((vector.v ? vector.x : vector[0]) - this._co.x) * this._scale;
        let y = (-1)*((vector.v ? vector.y : vector[1]) - this._co.y) * this._scale;
        return vector.v ? Vector.v(x, y) : [x, y];
    }

    /** @override */
    from(vector) {
        let x = ((vector.v ? vector.x : vector[0]) / this._scale) + this._co.x;
        let y = ((-1)*(vector.v ? vector.y : vector[1]) / this._scale) + this._co.y;
        return vector.v ? Vector.v(x, y) : [x, y];
    }

    /**
     * 缩放: 对坐标系标度进行缩放  
     * 当 "zr>0" 时，进行 "放大"，标度变小  
     * 当 "zr&lt;0" 时，进行 "缩小"， 标度变大  
     * 
     * @param { number } zr - 缩放值 
     * @returns { Object } this
     * @example
     * coor.zoom(2)   //放大2倍
     * coor.zoom(-2)  //缩小2倍 
     */
    zoom(zr) {
        zr > 0 ? this.scale /= Math.abs(zr) : this.scale *=  Math.abs(zr)
        return this;
    }

    /**
     * 平移: 对屏幕像素坐标系原点坐标(co)进行平移
     * 
     * @param { Vector } vector - 平移坐标 
     * @returns { Object } this
     * @example
     * //向右平移100个像素
     * coor.move(Vector.v(-100, 0));  
     */
    move(vector) {
        this._co.add(vector.v ? vector : Vector.v(...vector));
        return this;
    }
}


//网格坐标系
class Grid extends CoordinateSystem {

    /**
     * @classdesc Grid(网格坐标系): 将屏幕像素坐标系映射到网格坐标系
     * 
     * @property { Vector } co - 屏幕像素坐标系原点坐标
     * @property { number } dx - 网格单元x轴尺寸(dx>0)
     * @property { number } dy - 网格单元y轴尺寸(dx>0)
     * @property { boolean } RY - y轴反转标记 -> true(向上) | false(向下)
     * 
     * @param { Vector } co - 屏幕像素坐标系原点坐标
     * @param { number } [dx=1] - 网格单元x轴尺寸(dx>0)
     * @param { number } [dy=1] - 网格单元y轴尺寸(dx>0) 
     * @param { boolean } [RY=false] - y轴反转标记
     * 
     * @example
     * let grid = new Grid(new Vector(canvas.cx, canvas.cy), 10, 10, true);
     */
    constructor(co, dx=1, dy=1, RY=false) {
        super();
        this.co = co;
        this._dx = dx;
        this._dy = dy;
        this._RY = RY ? -1 : 1;
    }

    get dx() { return this._dx; }
    set dx(val) {
        if(val &lt; 1) { throw Error(`dx(${val}) must be in [1, Inf)`); }
        this._dx = Math.round(val);
    }
    
    get dy() { return this._dy; }
    set dy(val) {
        if(val &lt; 1) { throw Error(`dy(${val}) must be in [1, Inf)`); }
        this._dy = Math.round(val);
    }

    get RY() { return (this._RY == -1); }
    set RY(val) {
        this._RY = val ? -1 : 1;
    }
    
    /**
     * PCS -> Grid: 单元格内的坐标会映射到同一点
     * 
     * @override
     * @param { Vector } vector - 主坐标系目标向量 
     * @returns { Vector } 网格坐标系的目标向量
     */
    to(vector) {
        let x = Math.round(((vector.v ? vector.v[0] : vector[0]) - this.co.x) / this.dx);
        let y = Math.round(((vector.v ? vector.y : vector[1]) - this.co.y) / this.dy) * this._RY;
        return vector.v ? Vector.v(x, y) : [x, y];
    }

    /** @override */
    from(vector) {
        let x = this.dx * (vector.v ? vector.x : vector[0]) + this.co.x;
        let y = this.dy * (vector.v ? vector.y : vector[1]) * this._RY + this.co.y;
        return vector.v ? Vector.v(x, y) : [x, y];
    }

}


//极坐标系
class PolarCS extends CoordinateSystem {

    /**
     * @classdesc 极坐标系: 将屏幕像素坐标系映射到极坐标系
     * 
     * @property { Vector } co - 屏幕像素坐标系原点坐标
     * 
     * @param { Vector } co - 屏幕像素坐标系原点坐标
     * 
     * @example
     * let coor = new PolarCS(new Vector(canvas.cx, canvas.cy));
     */
    constructor(co) {
        super();
        this.co = co;
    }

    /**
     * PCS -> PolarCS
     * 
     * @param { Vector | Array } vector - 主坐标系目标向量 
     * @returns { Vector | Array } 极坐标系目标向量 | [dist, rad]
     */
    to(vector) {
        let v = (vector.v ? vector : new Vector(...vector)).sub(this.co);
        let dist = v.dist(), rad = v.rad();
        return vector.v ? Vector.v(dist, rad) : [dist, rad];
    }

    /**
     * PolarCS -> PCS
     * @param { Vector | Array } vector - 极坐标系目标向量 | [dist, rad]
     * @returns { Vector | Array } 主坐标系的目标向量 
     */
    from(vector) {
        let dist = (vector.v ? vector.x : vector[0]);
        let rad = (vector.v ? vector.y : vector[1]);
        let x = dist * Math.sin(rad) + this.co.x;
        let y = dist * Math.cos(rad) + this.co.y;
        return vector.v ? Vector.v(x, y) : [x, y];
    }

}


export { CoordinateSystem, RCS, Grid, PolarCS };</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Fri Apr 28 2023 01:12:59 GMT+0800 (香港标准时间) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
